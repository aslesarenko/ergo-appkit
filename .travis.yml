sudo: required
dist: trusty
before_cache:
- find $HOME/.sbt -name "*.lock" | xargs rm
- find $HOME/.ivy2 -name "ivydata-*.properties" | xargs rm
cache:
  directories:
  - "$HOME/.ivy2/cache"
  - "$HOME/.sbt"
language: scala
jdk:
- oraclejdk8
stages:
- test
- name: release
  if: tag =~ ^v
- name: snapshot
  if: NOT tag IS present
jobs:
  include:
  - stage: test
    script: sbt test
  - stage: release
    script: sbt publishSigned sonatypeBundleRelease
  - stage: snapshot
    script: sbt publish
env:
  global:
  - secure: AlMkKVnCnIAFPZNx2oLsZst/J8AH9oZ5k+3ikXLODKSDIUeD1mRxmtSkFbvYX6xzbL910jIgrRwjnRtM5XI3eNA5YcMnHwX8/7MJM1bqktFFnkPS2xjxWS8fzxAsFQrXrgdfMr/sNW9GgYd9J++jA8hAVy/PBfx7Ybg3zQUdyJI0szYkM3HS7Y1DKM+q4QjWec5FH5MjRZYM9fnE1yxDDKsNUyyZaI7lPOvWqilKwe4I4PhOpBOxLcUpjrqPWkJYjCJMhkOvCVNjiqBZ/WJyiqf8sSyMTxf5S6lNPAQMNoAB2310G4+0Cgagdknv2XsEntdLAk8t732fEuXRjqVHxtQYQDNrQi3QQ3pIqqfsJM4lOCRMYYTvo+NWEpao52HAbBiRMIpzx/xFTZD9ETuNUKneJZMmHcoLJlUCN83r+k4JLk1dDFlFrqnb/e7XFNzwdCsNAzbPjWcIkspYD/Puobb9cYAKdjyfARLtL/SCJSgYOrHI7zo9MU2yKBtGDCmuTjPcKIDPFUl3w716r1jWxozlRnH4DZX/gaw7QbuFe0iPfUwa9+RztbVXaMBZMBkqULnU1rw4rUa10hrfsYt2kdi/n4osEhXOOrqEeT2n6T8PF/ZHqhejItrbvW4eN3TU6A2IQoH2fXiBe1Hdxiq1t2HINvAjlJ98XzOgcxf4Xx4=
  - secure: JH+szQ3hjEiGNBzkU4qTEGsXLSGM6SIwVTVpcLKQtpAR8cX2rXj/epSCuuWO4VJYtxKRqhqI3om/0bL1SZZukYybb+ALl43Ow9J5VbhRUY8dUTHIMN87tAKLSYd/AeF0EgGMGKoUJwFuNMGmiXLIwoBRohAmM/Vkfdb2FFbleaP6SJGNgd3TsqvVJkCEpSZIfFnmRF23w+7APP8ZEtgMKxOF3choPu9jYcr1vbDalv08P/KGyzhkidLPPbkyCgqfnuIoCihZHItSonBM5Qix8cPGSYtmUZQ0TqBNTLTpM2c5gxhtpIgMwtpBeenOiXqRb4Mf9JQ2D09FnjhfBEqKix1CLo/rbZS0Zh0qtQEi7zQ4/rwT0JkF30xV3mWbnogeknaVXsq0umYFmC8hlrfRJXrTyCjvuANpkiy422UbVvv6IE0DPX7D6Gc6mW9yCUJqMPqAnR2Hzf+v1A3BfWDoAV0KAnugERiDYvJ+lp60HCSeatZ16my/Pyj0aK74KfuQWa+cEepdnTPShOrLqo9vvL89QbWF2RMwjTWxqk2XOrbvlodaHZxnjiN0MrSRUe29R6Br78k5zIrU/MqViNM5YPaiOS2H9M+U9/IMLu6if0f9uCpKn2V7L/j7E0DYrAy3cOOPiI1WPoJ0MmwH8cldlxYXLIBmzC0vSNbkYjmI7KQ=
